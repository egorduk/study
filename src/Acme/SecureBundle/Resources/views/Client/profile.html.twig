{% extends "AcmeSecureBundle::layout.html.twig" %}

{% block title "Client profile" %}

    {% block content %}
        <div class="container">
            {% if (formProfile == null) %}
                <div class="row">
                    <p>Ваш ID: {{ user.id }}</p>
                    <p>Ваш ник: {{ user.login }}</p>
                    <p>Ваш Email: {{ user.email }}</p>
                    <p>Ваш статус: Заказчик</p>
                    <p>Дата регистрации в системе: {{ user.datereg.format("d.m.Y") }}</p>
                    <p>Ваш Skype: {{ userInfo.skype }}</p>
                    <p>Ваш Icq: {{ userInfo.icq }}</p>
                    <p>Ваш номер мобильного телефона: {{ userInfo.mobilephone }}</p>
                    <p>Ваш номер стационарного телефона: {{ userInfo.staticphone }}</p>
                    <p>Ваша страна: <img src='{{ asset('bundles/images/flags/') }}{{ userInfo.country.code }}.png' alt={{ userInfo.country.name }} title={{ userInfo.country.name }}></p>
                    <p>Ваше имя: {{ userInfo.username }}</p>
                    <p>Ваша фамилия: {{ userInfo.surname }}</p>
                    <p>Ваше отчество: {{ userInfo.lastname }}</p>
                </div>
                <div class="row">
                    <a href="{{ path('secure_client_profile', {'type': 'edit'}) }}">Изменить данные</a>
                </div>
            {% else %}
            <div class="row">
                {{ form_start(formProfile) }}
                    {{ form_errors(formProfile) }}
                        {{ form_row(formProfile.fieldUsername) }}
                        {{ form_row(formProfile.fieldSurname) }}
                        {{ form_row(formProfile.fieldLastname) }}
                        {{ form_row(formProfile.fieldSkype) }}
                        {{ form_row(formProfile.fieldIcq) }}
                        {{ form_row(formProfile.fieldMobilePhone) }}
                        {{ form_row(formProfile.fieldStaticPhone) }}
                        {{ form_row(formProfile.selectorCountry) }}
                {{ form_end(formProfile) }}
            </div>
            {% endif %}
            <script>
                $(document).ready(function() {
                    function format(state) {
                        /*if (!state.id){
                         return state.text;
                         };*/
                        return "<img title='" + state.text + "' class='flag' src='{{ asset('bundles/images/flags/') }}" + state.id.toLowerCase() + ".png'/>";
                    }
                    $("#formProfile_selectorCountry").select2({
                        minimumResultsForSearch: -1,
                        formatResult: format,
                        formatSelection: format,
                        escapeMarkup: function(m) { return m; }
                    });
                });
            </script>
        </div>
    {% endblock %}
